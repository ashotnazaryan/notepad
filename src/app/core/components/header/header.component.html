<div class="header-container">
  <mat-toolbar color="primary">
    <!-- TODO move to component -->
    <app-button
      icon="settings"
      color="primary"
      [size]="ButtonSize.icon"
      [matMenuTriggerFor]="tools"
      [matTooltip]="'GENERAL_TOOLTIPS_TOOLS' | translate" 
      matTooltipPosition="right">
    </app-button>
    <mat-menu #tools="matMenu">
      <button *ngFor="let item of menuItems.tools" mat-menu-item [routerLink]="item.route">{{item.langKey | translate}}</button>
    </mat-menu>
    <div class="header-container__widgets flex flex-row flex-grow-1 justify-content-between align-items-center">
      <app-breadcrumbs 
        [item]="(modulePage$ | async)!">
      </app-breadcrumbs>
      <div class="flex flex-row flex-grow-1 align-items-center justify-content-end">
        <app-clock [format]="clockFormat" class="ellipsis-text"></app-clock>
        <!-- TODO move to component -->
        <app-button
          icon="language"
          color="primary"
          [size]="ButtonSize.small"
          [text]="(currentLanguage$ | async)?.shortName"
          [matMenuTriggerFor]="lang">
        </app-button>
        <mat-menu #lang="matMenu">
          <ng-container *ngFor="let item of languages">
            <button mat-menu-item (click)="changeLanguage(item)">{{item.name}}</button>
          </ng-container>
        </mat-menu>
        <app-button
          icon="notifications_active"
          color="primary"
          [size]="ButtonSize.icon"
          [matMenuTriggerFor]="notifications"
          [matTooltip]="'GENERAL_TOOLTIPS_NOTIFICATIONS' | translate"
          matTooltipPosition="left"
          matBadgeSize="small"
          matBadge="{{totalCount$ | async}}"
          matBadgeColor="accent"
          matBadgeHidden="{{!(totalCount$ | async)}}">
        </app-button>
        <mat-menu #notifications="matMenu">
          <button
            *ngFor="let item of menuItems.notifications"
            mat-menu-item
            [routerLink]="item.route">
            <span
              matBadgeSize="small"
              matBadgeOverlap="false"
              matBadge="{{groceryNotificationsCount$ | async}}"
              matBadgeColor="accent"
              matBadgeHidden="{{!(groceryNotificationsCount$ | async)}}">
              {{item.langKey | translate}}
            </span>
          </button>
        </mat-menu>
      </div>
    </div>
  </mat-toolbar>
</div>